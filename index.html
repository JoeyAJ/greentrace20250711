<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GreenTrace</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .icon { width: 20px; height: 20px; background-color: #ccc; display: inline-block; border-radius: 50%; }
    .bg-card { background: linear-gradient(to right, #4ade80, #3b82f6); }
    .nav-active { color: #16a34a; background-color: #f0fdf4; }
  </style>
</head>
<body class="bg-gray-50">

<div class="min-h-screen bg-gray-50">
  <div class="bg-white shadow-sm">
    <div class="max-w-md mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <div class="h-8 w-8 rounded-full bg-green-500 mr-2"></div>
          <h1 class="text-xl font-bold text-gray-800">GreenTrace</h1>
        </div>
        <div class="flex items-center text-sm text-gray-600">
          <div class="h-4 w-4 bg-yellow-400 rounded-full mr-1"></div>
          <span id="pointsTop">1250 积分</span>
        </div>
      </div>
    </div>
  </div>

  <div id="main" class="max-w-md mx-auto px-4 py-6 pb-20"></div>

  <div class="fixed bottom-0 left-0 right-0 bg-white border-t">
    <div class="max-w-md mx-auto px-4">
      <div class="flex justify-around py-2 text-sm">
        <button onclick="setPage('home')" id="nav-home" class="flex flex-col items-center nav-active px-2 py-1 rounded">
          <div class="icon bg-green-500"></div><span>首页</span>
        </button>
        <button onclick="setPage('tasks')" id="nav-tasks" class="flex flex-col items-center px-2 py-1 text-gray-600">
          <div class="icon bg-blue-500"></div><span>任务</span>
        </button>
        <button onclick="setPage('leaderboard')" id="nav-leaderboard" class="flex flex-col items-center px-2 py-1 text-gray-600">
          <div class="icon bg-yellow-500"></div><span>排行榜</span>
        </button>
        <button onclick="setPage('rewards')" id="nav-rewards" class="flex flex-col items-center px-2 py-1 text-gray-600">
          <div class="icon bg-pink-500"></div><span>奖励</span>
        </button>
        <button onclick="setPage('profile')" id="nav-profile" class="flex flex-col items-center px-2 py-1 text-gray-600">
          <div class="icon bg-gray-500"></div><span>我的</span>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
const userStats = {
  totalPoints: 1250,
  totalCarbonSaved: 2.45,
  tasksCompleted: 18,
  rank: 3,
  streak: 7
};
const tasks = [
  { id: 1, title: "使用可重复使用的水杯", points: 10, carbonSaved: 0.1 },
  { id: 2, title: "步行或骑行上班", points: 25, carbonSaved: 0.5 },
  { id: 3, title: "关闭不必要的电器", points: 15, carbonSaved: 0.2 },
  { id: 4, title: "使用公共交通", points: 20, carbonSaved: 0.3 },
  { id: 5, title: "回收塑料瓶", points: 12, carbonSaved: 0.15 },
  { id: 6, title: "减少肉类消费", points: 30, carbonSaved: 0.8 }
];
const leaderboard = [
  { rank: 1, name: "环保达人", points: 1580, carbonSaved: 3.2 },
  { rank: 2, name: "绿色生活", points: 1420, carbonSaved: 2.9 },
  { rank: 3, name: "你", points: userStats.totalPoints, carbonSaved: userStats.totalCarbonSaved },
  { rank: 4, name: "低碳先锋", points: 1100, carbonSaved: 2.1 },
  { rank: 5, name: "节能专家", points: 980, carbonSaved: 1.8 }
];
const rewards = [
  { id: 1, name: "环保购物袋", points: 200, stock: 15 },
  { id: 2, name: "竹制牙刷", points: 150, stock: 8 },
  { id: 3, name: "太阳能充电宝", points: 800, stock: 3 },
  { id: 4, name: "有机种子套装", points: 300, stock: 12 }
];
let completed = new Set();

function setPage(page) {
  document.querySelectorAll("button[id^='nav-']").forEach(btn => {
    btn.classList.remove("nav-active");
    btn.classList.add("text-gray-600");
  });
  document.getElementById("nav-" + page).classList.add("nav-active");

  const main = document.getElementById("main");

  if (page === "home") {
    main.innerHTML = \`
      <div class="space-y-6">
        <div class="bg-card rounded-lg p-6 text-white">
          <div class="flex items-center justify-between">
            <div><h2 class="text-2xl font-bold">欢迎回来！</h2><p class="text-green-100">继续你的环保之旅</p></div>
            <div class="text-right"><div class="text-3xl font-bold">\${userStats.totalPoints}</div><div class="text-sm text-green-100">总积分</div></div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="bg-white rounded-lg p-4 shadow-sm border"><div class="text-2xl font-bold text-gray-800">\${userStats.totalCarbonSaved}</div><div class="text-sm text-gray-600">千克碳减排</div></div>
          <div class="bg-white rounded-lg p-4 shadow-sm border"><div class="text-2xl font-bold text-gray-800">#\${userStats.rank}</div><div class="text-sm text-gray-600">当前排名</div></div>
          <div class="bg-white rounded-lg p-4 shadow-sm border"><div class="text-2xl font-bold text-gray-800">\${userStats.tasksCompleted}</div><div class="text-sm text-gray-600">完成任务</div></div>
          <div class="bg-white rounded-lg p-4 shadow-sm border"><div class="text-2xl font-bold text-gray-800">\${userStats.streak}</div><div class="text-sm text-gray-600">连续天数</div></div>
        </div>
        <div class="bg-white rounded-lg p-4 shadow-sm border">
          <h3 class="text-lg font-semibold mb-3">今日任务</h3>
          <div class="space-y-2">
            \${tasks.slice(0, 3).map(task => \`
              <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div><div class="font-medium">\${task.title}</div><div class="text-sm text-gray-600">+\${task.points} 积分 | -\${task.carbonSaved}kg 碳排放</div></div>
                <button onclick="complete(\${task.id})" class="px-4 py-2 rounded-lg font-medium bg-green-500 text-white hover:bg-green-600" id="task-\${task.id}">完成</button>
              </div>\`).join('')}
          </div>
        </div>
      </div>
    \`;
  } else if (page === "tasks") {
    main.innerHTML = '<h2 class="text-xl font-bold mb-2 text-gray-800">环保任务</h2>';
    main.innerHTML += tasks.map(task => \`
      <div class="bg-white rounded-lg p-4 shadow-sm border mb-2">
        <div class="flex items-center justify-between">
          <div><h3 class="font-semibold text-lg">\${task.title}</h3>
          <div class="text-sm text-gray-600 mt-1">+\${task.points} 积分 | 减少 \${task.carbonSaved}kg 碳排放</div></div>
          <button onclick="complete(\${task.id})" id="task-\${task.id}" class="px-4 py-2 rounded-lg font-medium \${completed.has(task.id) ? 'bg-green-100 text-green-700' : 'bg-green-500 text-white hover:bg-green-600'}" \${completed.has(task.id) ? 'disabled' : ''}>\${completed.has(task.id) ? '已完成' : '完成任务'}</button>
        </div>
      </div>\`).join('');
  } else if (page === "leaderboard") {
    main.innerHTML = '<h2 class="text-xl font-bold mb-2 text-gray-800">排行榜</h2>';
    main.innerHTML += leaderboard.map(user => \`
      <div class="flex items-center justify-between bg-\${user.name === '你' ? 'green-50' : 'white'} border p-4 rounded mb-2">
        <div><div class="font-semibold">\${user.rank}. \${user.name}</div><div class="text-sm text-gray-600">\${user.carbonSaved}kg 碳减排</div></div>
        <div class="text-right"><div class="font-bold text-lg">\${user.points}</div><div class="text-sm text-gray-600">积分</div></div>
      </div>\`).join('');
  } else if (page === "rewards") {
    main.innerHTML = '<h2 class="text-xl font-bold mb-2 text-gray-800">奖励商店</h2>';
    main.innerHTML += rewards.map(item => \`
      <div class="bg-white rounded-lg p-4 shadow-sm border mb-2">
        <div class="flex justify-between items-center mb-1"><h3 class="text-lg font-semibold">\${item.name}</h3><span class="text-sm text-gray-600">库存: \${item.stock}</span></div>
        <div class="flex justify-between items-center">
          <span class="text-yellow-500 font-bold">\${item.points} 积分</span>
          <button class="\${userStats.totalPoints >= item.points ? 'bg-blue-500 hover:bg-blue-600 text-white' : 'bg-gray-300 text-gray-500'} px-4 py-2 rounded-lg" \${userStats.totalPoints < item.points ? 'disabled' : ''}>兑换</button>
        </div>
      </div>\`).join('');
  } else if (page === "profile") {
    main.innerHTML = \`
      <h2 class="text-xl font-bold mb-4 text-gray-800">个人资料</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm border">
        <div class="flex items-center mb-6">
          <div class="w-20 h-20 bg-card rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4">U</div>
          <div><h3 class="text-xl font-semibold">环保用户</h3><p class="text-gray-600">加入时间: 2024年1月</p></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-green-600">\${userStats.totalPoints}</div><div class="text-sm text-gray-600">总积分</div></div>
          <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-blue-600">\${userStats.totalCarbonSaved}</div><div class="text-sm text-gray-600">千克碳减排</div></div>
          <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-purple-600">\${userStats.tasksCompleted}</div><div class="text-sm text-gray-600">完成任务</div></div>
          <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-orange-600">#\${userStats.rank}</div><div class="text-sm text-gray-600">当前排名</div></div>
        </div>
      </div>\`;
  }
}

function complete(id) {
  if (!completed.has(id)) {
    const task = tasks.find(t => t.id === id);
    userStats.totalPoints += task.points;
    userStats.tasksCompleted += 1;
    completed.add(id);
    document.getElementById("pointsTop").innerText = userStats.totalPoints + " 积分";
    const btn = document.getElementById("task-" + id);
    if (btn) {
      btn.innerText = "已完成";
      btn.classList.remove("bg-green-500", "text-white");
      btn.classList.add("bg-green-100", "text-green-700");
      btn.disabled = true;
    }
  }
}

window.onload = () => setPage('home');
</script>
</body>
</html>
